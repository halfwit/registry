#!/bin/rc

argv0=$0

fn usage {
	echo 'Usage:' $argv0 ' [-s svcfs] svcname addr [attr value]'
	exits 'usage';
}

svcfs=()
desc=()
auth=()

if(~ $1 "-s"){
	shift
	svcfs=$1
	shift
}

svcname=$1; shift
addr=$1; shift

~ $svcname "" && usage
~ $addr "" && usage

while(! ~ $#* 0){
	switch($1){
	case "description":
		$desc=$2
		shift
	case "auth":
		$auth=$2
		shift
	}
	shift
}

if(! ~ $#* 0)
	usage

# Now connect to the svcfs. Create out file, then set the address, description, and apparently the auth server
